# AD-SDLC Agent Registry
# Centralized agent configuration and metadata

version: "1.0.0"

# =============================================================================
# Agent Definitions
# =============================================================================
agents:
  # ---------------------------------------------------------------------------
  # Infrastructure Agents (Pre-pipeline)
  # ---------------------------------------------------------------------------
  mode-detector:
    id: "mode-detector"
    name: "Mode Detector Agent"
    korean_name: "모드 감지 에이전트"
    description: "Determines whether to use Greenfield or Enhancement pipeline based on project state"
    definition_file: ".claude/agents/mode-detector.md"
    category: "infrastructure"
    order: 0

    capabilities:
      - "document_presence_detection"
      - "codebase_analysis"
      - "keyword_analysis"
      - "confidence_scoring"
      - "user_override_support"

    io:
      inputs:
        - project_path
        - user_input
        - override_mode
      outputs:
        - mode_detection_result.yaml

    metrics:
      avg_duration_seconds: 5
      success_rate: 0.99

  # ---------------------------------------------------------------------------
  # Document Pipeline Agents
  # ---------------------------------------------------------------------------
  collector:
    id: "collector"
    name: "Collector Agent"
    korean_name: "정보 수집 에이전트"
    description: "Collects and structures user requirements from various sources"
    definition_file: ".claude/agents/collector.md"
    category: "document_pipeline"
    order: 1

    capabilities:
      - "multi_source_input"
      - "information_extraction"
      - "clarification_loop"
      - "structured_output"

    io:
      inputs:
        - user_message
        - files
        - urls
      outputs:
        - collected_info.yaml

    metrics:
      avg_duration_seconds: 120
      success_rate: 0.95

  prd-writer:
    id: "prd-writer"
    name: "PRD Writer Agent"
    korean_name: "PRD 작성 에이전트"
    description: "Generates PRD documents from collected information"
    definition_file: ".claude/agents/prd-writer.md"
    category: "document_pipeline"
    order: 2

    capabilities:
      - "template_based_generation"
      - "gap_analysis"
      - "consistency_check"
      - "priority_assignment"

    io:
      inputs:
        - collected_info.yaml
      outputs:
        - prd.md

    metrics:
      avg_duration_seconds: 180
      success_rate: 0.92

  srs-writer:
    id: "srs-writer"
    name: "SRS Writer Agent"
    korean_name: "SRS 작성 에이전트"
    description: "Generates SRS documents from PRD"
    definition_file: ".claude/agents/srs-writer.md"
    category: "document_pipeline"
    order: 3

    capabilities:
      - "requirement_decomposition"
      - "use_case_generation"
      - "interface_definition"
      - "traceability_matrix"

    io:
      inputs:
        - prd.md
      outputs:
        - srs.md

    metrics:
      avg_duration_seconds: 240
      success_rate: 0.90

  github-repo-setup:
    id: "github-repo-setup"
    name: "GitHub Repo Setup Agent"
    korean_name: "GitHub 저장소 설정 에이전트"
    description: "Creates and initializes public GitHub repository after SRS approval"
    definition_file: ".claude/agents/github-repo-setup.md"
    category: "project_setup"
    order: 3.5

    capabilities:
      - "project_info_extraction"
      - "readme_generation"
      - "license_selection"
      - "gitignore_generation"
      - "repository_creation"
      - "initial_commit"

    io:
      inputs:
        - prd.md
        - srs.md
      outputs:
        - github_repo.yaml
        - README.md
        - LICENSE
        - .gitignore

    metrics:
      avg_duration_seconds: 60
      success_rate: 0.95

  sds-writer:
    id: "sds-writer"
    name: "SDS Writer Agent"
    korean_name: "SDS 작성 에이전트"
    description: "Generates SDS documents from SRS"
    definition_file: ".claude/agents/sds-writer.md"
    category: "document_pipeline"
    order: 4

    capabilities:
      - "architecture_design"
      - "component_definition"
      - "api_design"
      - "database_schema"

    io:
      inputs:
        - srs.md
      outputs:
        - sds.md

    metrics:
      avg_duration_seconds: 300
      success_rate: 0.88

  # ---------------------------------------------------------------------------
  # Document Update Agents
  # ---------------------------------------------------------------------------
  prd-updater:
    id: "prd-updater"
    name: "PRD Updater Agent"
    korean_name: "PRD 업데이트 에이전트"
    description: "Incrementally updates PRD documents with new requirements, modifications, or deprecations"
    definition_file: ".claude/agents/prd-updater.md"
    category: "document_update"
    order: 5

    capabilities:
      - "incremental_update"
      - "version_management"
      - "conflict_detection"
      - "change_tracking"
      - "consistency_check"

    io:
      inputs:
        - existing_prd.md
        - change_request
      outputs:
        - updated_prd.md
        - changelog.md

    metrics:
      avg_duration_seconds: 120
      success_rate: 0.92

  srs-updater:
    id: "srs-updater"
    name: "SRS Updater Agent"
    korean_name: "SRS 업데이트 에이전트"
    description: "Incrementally updates SRS documents with new features, use cases, and traceability"
    definition_file: ".claude/agents/srs-updater.md"
    category: "document_update"
    order: 6

    capabilities:
      - "incremental_update"
      - "traceability_update"
      - "use_case_generation"
      - "interface_update"
      - "consistency_check"

    io:
      inputs:
        - existing_srs.md
        - prd_update_result.yaml
        - change_request
      outputs:
        - updated_srs.md
        - srs_changelog.md

    metrics:
      avg_duration_seconds: 150
      success_rate: 0.90

  sds-updater:
    id: "sds-updater"
    name: "SDS Updater Agent"
    korean_name: "SDS 업데이트 에이전트"
    description: "Incrementally updates SDS documents with new components, APIs, and architecture changes"
    definition_file: ".claude/agents/sds-updater.md"
    category: "document_update"
    order: 7

    capabilities:
      - "incremental_update"
      - "component_integration"
      - "api_specification"
      - "architecture_evolution"
      - "traceability_update"
      - "consistency_check"

    io:
      inputs:
        - existing_sds.md
        - srs_update_result.yaml
        - change_request
      outputs:
        - updated_sds.md
        - sds_changelog.md

    metrics:
      avg_duration_seconds: 180
      success_rate: 0.88

  # ---------------------------------------------------------------------------
  # Issue Management Agents
  # ---------------------------------------------------------------------------
  issue-reader:
    id: "issue-reader"
    name: "Issue Reader Agent"
    korean_name: "이슈 리더 에이전트"
    description: "Imports existing GitHub issues and converts them to AD-SDLC internal format for pipeline execution"
    definition_file: ".claude/agents/issue-reader.md"
    category: "issue_management"
    order: 4.5

    capabilities:
      - "github_issue_fetching"
      - "issue_parsing"
      - "dependency_extraction"
      - "priority_mapping"
      - "effort_estimation"
      - "dependency_graph_building"

    io:
      inputs:
        - github_issues
        - filter_criteria
      outputs:
        - issue_list.json
        - dependency_graph.json

    metrics:
      avg_duration_seconds: 30
      success_rate: 0.95

  issue-generator:
    id: "issue-generator"
    name: "Issue Generator Agent"
    korean_name: "이슈 생성 에이전트"
    description: "Generates GitHub issues from SDS components"
    definition_file: ".claude/agents/issue-generator.md"
    category: "issue_management"
    order: 5

    capabilities:
      - "work_breakdown"
      - "issue_templating"
      - "dependency_mapping"
      - "label_assignment"

    io:
      inputs:
        - sds.md
      outputs:
        - issue_list.json
        - dependency_graph.json

    metrics:
      avg_duration_seconds: 120
      success_rate: 0.95
      avg_issues_per_project: 15

  controller:
    id: "controller"
    name: "Controller Agent"
    korean_name: "관제 에이전트"
    description: "Orchestrates work distribution and monitors progress"
    definition_file: ".claude/agents/controller.md"
    category: "issue_management"
    order: 6

    capabilities:
      - "issue_prioritization"
      - "worker_management"
      - "progress_tracking"
      - "bottleneck_detection"

    io:
      inputs:
        - issue_list.json
        - dependency_graph.json
        - worker_status.yaml
      outputs:
        - controller_state.yaml
        - work_orders/*.yaml
        - progress_report.md

    metrics:
      avg_duration_seconds: 30  # Per scheduling cycle
      success_rate: 0.98

  # ---------------------------------------------------------------------------
  # Execution Agents
  # ---------------------------------------------------------------------------
  worker:
    id: "worker"
    name: "Worker Agent"
    korean_name: "작업 에이전트"
    description: "Implements assigned issues with code generation"
    definition_file: ".claude/agents/worker.md"
    category: "execution"
    order: 7

    capabilities:
      - "code_generation"
      - "test_writing"
      - "codebase_integration"
      - "self_verification"

    io:
      inputs:
        - work_order.yaml
      outputs:
        - implementation_result.yaml
        - source_files
        - test_files

    parallelizable: true
    max_instances: 5

    metrics:
      avg_duration_seconds: 600
      success_rate: 0.85
      retry_rate: 0.15

  pr-reviewer:
    id: "pr-reviewer"
    name: "PR Review Agent"
    korean_name: "PR 리뷰 에이전트"
    description: "Creates and reviews pull requests"
    definition_file: ".claude/agents/pr-reviewer.md"
    category: "execution"
    order: 8

    capabilities:
      - "pr_creation"
      - "code_review"
      - "quality_gate"
      - "feedback_loop"

    io:
      inputs:
        - implementation_result.yaml
      outputs:
        - pr_review_result.yaml

    metrics:
      avg_duration_seconds: 180
      success_rate: 0.90
      approval_rate: 0.80

  # ---------------------------------------------------------------------------
  # Analysis Pipeline Agents
  # ---------------------------------------------------------------------------
  code-reader:
    id: "code-reader"
    name: "Code Reader Agent"
    korean_name: "코드 분석 에이전트"
    description: "Analyzes source code structure, modules, and implementations for gap detection"
    definition_file: ".claude/agents/code-reader.md"
    category: "analysis_pipeline"
    order: 9

    capabilities:
      - "ast_parsing"
      - "module_discovery"
      - "class_extraction"
      - "function_extraction"
      - "interface_extraction"
      - "dependency_analysis"

    io:
      inputs:
        - source_root
      outputs:
        - code_inventory.yaml

    metrics:
      avg_duration_seconds: 60
      success_rate: 0.95

  doc-code-comparator:
    id: "doc-code-comparator"
    name: "Doc-Code Comparator Agent"
    korean_name: "문서-코드 비교 에이전트"
    description: "Compares documentation specifications against code implementations to identify gaps"
    definition_file: ".claude/agents/doc-code-comparator.md"
    category: "analysis_pipeline"
    order: 10

    capabilities:
      - "document_code_mapping"
      - "gap_detection"
      - "match_scoring"
      - "issue_generation"
      - "priority_assignment"

    io:
      inputs:
        - current_state.yaml
        - code_inventory.yaml
      outputs:
        - comparison_result.yaml
        - gap_issues.json

    metrics:
      avg_duration_seconds: 30
      success_rate: 0.95

  # ---------------------------------------------------------------------------
  # Enhancement Pipeline Agents
  # ---------------------------------------------------------------------------
  document-reader:
    id: "document-reader"
    name: "Document Reader Agent"
    korean_name: "문서 분석 에이전트"
    description: "Parses and analyzes existing PRD/SRS/SDS documents to understand current project state"
    definition_file: ".claude/agents/document-reader.md"
    category: "enhancement_pipeline"
    order: 1

    capabilities:
      - "document_parsing"
      - "version_tracking"
      - "requirement_extraction"
      - "traceability_mapping"

    io:
      inputs:
        - existing_prd.md
        - existing_srs.md
        - existing_sds.md
      outputs:
        - current_state.yaml

    metrics:
      avg_duration_seconds: 60
      success_rate: 0.95

  codebase-analyzer:
    id: "codebase-analyzer"
    name: "Codebase Analyzer Agent"
    korean_name: "코드베이스 분석 에이전트"
    description: "Analyzes existing code structure, architecture patterns, and dependencies"
    definition_file: ".claude/agents/codebase-analyzer.md"
    category: "enhancement_pipeline"
    order: 2

    capabilities:
      - "architecture_analysis"
      - "dependency_graphing"
      - "pattern_recognition"
      - "code_metrics"

    io:
      inputs:
        - source_root
        - package_files
      outputs:
        - architecture_overview.yaml
        - dependency_graph.json

    parallelizable: true
    max_instances: 1

    metrics:
      avg_duration_seconds: 120
      success_rate: 0.93

  impact-analyzer:
    id: "impact-analyzer"
    name: "Impact Analyzer Agent"
    korean_name: "영향 분석 에이전트"
    description: "Assesses implications of proposed changes on existing codebase and documentation"
    definition_file: ".claude/agents/impact-analyzer.md"
    category: "enhancement_pipeline"
    order: 3

    capabilities:
      - "change_scope_analysis"
      - "affected_module_detection"
      - "risk_assessment"
      - "regression_prediction"

    io:
      inputs:
        - current_state.yaml
        - architecture_overview.yaml
        - dependency_graph.json
        - change_request
      outputs:
        - impact_report.yaml

    metrics:
      avg_duration_seconds: 90
      success_rate: 0.92

  regression-tester:
    id: "regression-tester"
    name: "Regression Tester Agent"
    korean_name: "회귀 테스트 에이전트"
    description: "Validates that existing functionality is not broken by new changes through test mapping, execution, and compatibility analysis"
    definition_file: ".claude/agents/regression-tester.md"
    category: "enhancement_pipeline"
    order: 11

    capabilities:
      - "affected_test_identification"
      - "regression_test_execution"
      - "coverage_impact_analysis"
      - "compatibility_verification"
      - "test_mapping"

    io:
      inputs:
        - changed_files
        - dependency_graph.json
        - architecture_overview.yaml
      outputs:
        - regression_report.yaml

    parallelizable: true
    max_instances: 1

    metrics:
      avg_duration_seconds: 300
      success_rate: 0.95

# =============================================================================
# Agent Categories
# =============================================================================
categories:
  project_setup:
    name: "Project Setup"
    description: "Agents that setup project infrastructure"
    agents:
      - github-repo-setup
    execution_mode: "sequential"

  document_pipeline:
    name: "Document Pipeline"
    description: "Agents that generate documentation (PRD, SRS, SDS)"
    agents:
      - collector
      - prd-writer
      - srs-writer
      - sds-writer
    execution_mode: "sequential"

  document_update:
    name: "Document Update"
    description: "Agents that incrementally update existing documents"
    agents:
      - prd-updater
      - srs-updater
      - sds-updater
    execution_mode: "on_demand"

  issue_management:
    name: "Issue Management"
    description: "Agents that manage GitHub issues and work distribution"
    agents:
      - issue-reader
      - issue-generator
      - controller
    execution_mode: "sequential"

  execution:
    name: "Execution"
    description: "Agents that implement code and review PRs"
    agents:
      - worker
      - pr-reviewer
    execution_mode: "parallel"

  analysis_pipeline:
    name: "Analysis Pipeline"
    description: "Agents that analyze existing code and documents for gap detection"
    agents:
      - code-reader
      - document-reader
      - doc-code-comparator
    execution_mode: "parallel"

  enhancement_pipeline:
    name: "Enhancement Pipeline"
    description: "Agents that support existing project improvements and regression testing"
    agents:
      - document-reader
      - codebase-analyzer
      - impact-analyzer
      - prd-updater
      - srs-updater
      - sds-updater
      - regression-tester
    execution_mode: "mixed"  # Some parallel, some sequential

# =============================================================================
# Agent Relationships
# =============================================================================
relationships:
  dependencies:
    prd-writer:
      requires: [collector]
    srs-writer:
      requires: [prd-writer]
    github-repo-setup:
      requires: [srs-writer]
      blocks: [sds-writer]
    sds-writer:
      requires: [srs-writer, github-repo-setup]
    issue-generator:
      requires: [sds-writer]
    issue-reader:
      requires: []  # Alternative entry point, no dependencies
      alternative_to: [issue-generator]  # Can replace issue-generator in import mode
    controller:
      requires: [issue-generator]  # Or issue-reader in import mode
      alternative_inputs: [issue-reader]
    worker:
      requires: [controller]
    pr-reviewer:
      requires: [worker]
    srs-updater:
      requires: [prd-updater]
    sds-updater:
      requires: [srs-updater]
    doc-code-comparator:
      requires: [document-reader, code-reader]
    # Enhancement Pipeline Dependencies
    impact-analyzer:
      requires: [document-reader, codebase-analyzer]
    prd-updater:
      requires: [impact-analyzer]
    regression-tester:
      requires: [codebase-analyzer, worker]

  data_flow:
    - from: collector
      to: prd-writer
      data: collected_info.yaml

    - from: prd-writer
      to: srs-writer
      data: prd.md

    - from: srs-writer
      to: github-repo-setup
      data: srs.md

    - from: prd-writer
      to: github-repo-setup
      data: prd.md

    - from: github-repo-setup
      to: sds-writer
      data: github_repo.yaml

    - from: srs-writer
      to: sds-writer
      data: srs.md

    - from: sds-writer
      to: issue-generator
      data: sds.md

    - from: issue-generator
      to: controller
      data: [issue_list.json, dependency_graph.json]

    - from: issue-reader
      to: controller
      data: [issue_list.json, dependency_graph.json]
      mode: import  # Alternative data flow for import mode

    - from: controller
      to: worker
      data: work_order.yaml

    - from: worker
      to: pr-reviewer
      data: implementation_result.yaml

    - from: prd-updater
      to: srs-updater
      data: prd_update_result.yaml

    - from: srs-updater
      to: sds-updater
      data: srs_update_result.yaml

    - from: document-reader
      to: doc-code-comparator
      data: current_state.yaml

    - from: code-reader
      to: doc-code-comparator
      data: code_inventory.yaml

    - from: codebase-analyzer
      to: regression-tester
      data: [dependency_graph.json, architecture_overview.yaml]

    - from: worker
      to: regression-tester
      data: changed_files

    - from: regression-tester
      to: pr-reviewer
      data: regression_report.yaml

    # Enhancement Pipeline Data Flow
    - from: document-reader
      to: impact-analyzer
      data: current_state.yaml

    - from: codebase-analyzer
      to: impact-analyzer
      data: [architecture_overview.yaml, dependency_graph.json]

    - from: impact-analyzer
      to: prd-updater
      data: impact_report.yaml

    - from: sds-updater
      to: issue-generator
      data: sds_update_result.yaml
      mode: enhancement

    - from: impact-analyzer
      to: issue-generator
      data: impact_report.yaml
      mode: enhancement

# =============================================================================
# Model Configurations
# =============================================================================
models:
  sonnet:
    id: "claude-sonnet-4-20250514"
    context_window: 200000
    max_output: 64000
    cost_per_1k_input: 0.003
    cost_per_1k_output: 0.015
    best_for:
      - "document_generation"
      - "code_generation"
      - "analysis"

  opus:
    id: "claude-opus-4-20250514"
    context_window: 200000
    max_output: 32000
    cost_per_1k_input: 0.015
    cost_per_1k_output: 0.075
    best_for:
      - "complex_reasoning"
      - "architecture_decisions"
      - "critical_reviews"

  haiku:
    id: "claude-haiku-3-20240307"
    context_window: 200000
    max_output: 4096
    cost_per_1k_input: 0.00025
    cost_per_1k_output: 0.00125
    best_for:
      - "quick_searches"
      - "simple_transformations"
      - "status_checks"
